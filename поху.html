<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Valentine ‚Äî –ø—Ä–æ—Å—Ç–æ</title>
    <style>
        * {
            image-rendering: pixelated;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: monospace;
            overflow: hidden;
            background: #87c5ff;
            height: 100vh;
            width: 100vw;
            position: fixed;
            touch-action: pan-y pinch-zoom;
        }

        /* –ø–∞–¥–∞—é—â–∏–µ –∏–∫–æ–Ω–∫–∏ */
        .background span {
            position: absolute;
            animation: fall linear infinite;
            pointer-events: none;
            user-select: none;
        }

        @keyframes fall {
            from { transform: translateY(-10vh); }
            to { transform: translateY(110vh); }
        }

        .center {
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            pointer-events: none;
        }

        .center > * {
            pointer-events: auto;
        }

        /* –ö–û–ù–í–ï–†–¢ ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ */
        .envelope {
            position: relative;
            width: 360px;
            height: 240px;
            background: #e5e5e5;
            border: 8px solid #000;
            box-shadow: 16px 16px 0 #000;
            text-align: center;
            padding-top: 90px;
            margin: 0 auto;
            flex-shrink: 0;
        }

        .lid {
            position: absolute;
            top: -120px;
            left: -8px;
            width: calc(100% + 16px);
            height: 120px;
            background:
                linear-gradient(135deg, #dcdcdc 25%, transparent 25%) -20px 0,
                linear-gradient(225deg, #dcdcdc 25%, transparent 25%) -20px 0,
                linear-gradient(315deg, #dcdcdc 25%, transparent 25%),
                linear-gradient(45deg, #dcdcdc 25%, transparent 25%);
            background-size: 40px 40px;
            background-color: #dcdcdc;
            border: 8px solid #000;
            box-sizing: content-box;
        }

        .heart {
            position: absolute;
            top: -55px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 54px;
            text-shadow: 4px 4px 0 #000;
        }

        #question {
            font-size: 24px;
            margin: 0 0 20px 0;
            word-break: break-word;
        }

        /* –ö–ù–û–ü–ö–ò ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä, –∫—Ä—É–ø–Ω—ã–µ –¥–ª—è —Ç—ã–∫–∞ */
        button {
            padding: 12px 24px;
            margin: 8px 12px;
            border: 2px solid black;
            font-family: monospace;
            font-size: 20px;
            cursor: pointer;
            background: #3cab3c;
            color: white;
            box-shadow: 5px 5px 0 #000;
            min-width: 100px;
            touch-action: manipulation;
            transition: all 0.05s ease;
        }

        button:active {
            transform: translate(4px, 4px);
            box-shadow: 1px 1px 0 #000;
        }

        /* –∫–Ω–æ–ø–∫–∞ –ù–ï–¢ ‚Äî –±—É–¥–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –ø–ª–∞–≤–Ω–æ */
        .no {
            background: #777;
            position: absolute !important;
            left: 220px;        /* –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∞ –æ—Ç –∫–Ω–æ–ø–∫–∏ –î–ê */
            top: 300px;          /* —á—Ç–æ–±—ã –Ω–µ –Ω–∞–ª–µ–∑–∞–ª–∞ —Å—Ä–∞–∑—É */
            transition: left 0.4s ease, top 0.4s ease; /* –º–µ–¥–ª–µ–Ω–Ω–æ–µ –∏ –ø–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ */
            will-change: left, top;
            z-index: 1000;
        }

        /* –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å–ª–µ –î–ê */
        .card {
            background: #fff;
            border: 8px solid #000;
            padding: 40px;
            box-shadow: 16px 16px 0 #000;
            max-width: 420px;
            text-align: center;
        }

        .card p {
            font-size: 20px;
            line-height: 1.6;
        }

        .next {
            margin-top: 20px;
            font-size: 28px;
            padding: 10px 30px;
        }
    </style>
</head>
<body>

<div class="background" id="bg"></div>

<div class="center" id="main">
    <div class="envelope" id="envelope">
        <div class="lid"></div>
        <div class="heart">‚ù§Ô∏è</div>

        <h2 id="question">–ë—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</h2>

        <button onclick="accept()">–î–∞</button>
        <button class="no" id="noBtn">–ù–µ—Ç</button>
    </div>
</div>

<script>
    (function() {
        // –ø–∞–¥–∞—é—â–∏–µ –∏–∫–æ–Ω–∫–∏ (—Å–µ—Ä–¥–µ—á–∫–∏ –∏ —Ü–≤–µ—Ç—ã)
        const icons = ["‚ù§Ô∏è","üíñ","üå∏","üå∑","üíê","üíï","üå∫"];
        const bg = document.getElementById("bg");

        for (let i = 0; i < 35; i++) {
            let span = document.createElement("span");
            span.innerHTML = icons[Math.floor(Math.random() * icons.length)];
            span.style.left = Math.random() * 100 + "%";
            span.style.animationDuration = (5 + Math.random() * 10) + "s";
            span.style.fontSize = (20 + Math.random() * 28) + "px";
            span.style.animationDelay = (Math.random() * 5) + "s";
            bg.appendChild(span);
        }

        const noBtn = document.getElementById("noBtn");
        let escapes = 0;
        let moveTimer = null;

        // –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ—Ç–æ–¥–≤–∏–≥–∞–Ω–∏—è –æ—Ç —Ç–æ—á–∫–∏ (–ø–∞–ª—å—Ü–∞ –∏–ª–∏ –∫—É—Ä—Å–æ—Ä–∞)
        function gentlyMoveAway(clientX, clientY) {
            if (!noBtn || noBtn.style.display === 'none') return;

            const btnRect = noBtn.getBoundingClientRect();
            const btnCenterX = btnRect.left + btnRect.width / 2;
            const btnCenterY = btnRect.top + btnRect.height / 2;

            // –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –æ—Ç –∫–∞—Å–∞–Ω–∏—è –¥–æ —Ü–µ–Ω—Ç—Ä–∞ –∫–Ω–æ–ø–∫–∏
            const dist = Math.hypot(clientX - btnCenterX, clientY - btnCenterY);

            // –µ—Å–ª–∏ –ø–æ–¥–æ—à–ª–∏ –±–ª–∏–∑–∫–æ (–º–µ–Ω—å—à–µ 150px) ‚Äî –æ—Ç–æ–¥–≤–∏–≥–∞–µ–º—Å—è
            if (dist < 150) {
                // –Ω–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —ç–∫—Ä–∞–Ω–∞ —Å –æ—Ç—Å—Ç—É–ø–æ–º
                const maxX = window.innerWidth - btnRect.width - 20;
                const maxY = window.innerHeight - btnRect.height - 20;
                const minX = 20;
                const minY = 60; // —á—Ç–æ–±—ã –Ω–µ —É–ª–µ—Ç–µ–ª–∞ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ

                const newX = Math.random() * (maxX - minX) + minX;
                const newY = Math.random() * (maxY - minY) + minY;

                noBtn.style.left = newX + 'px';
                noBtn.style.top = newY + 'px';
                noBtn.style.transform = 'none'; // —É–±–∏—Ä–∞–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–º–µ—â–µ–Ω–∏—è

                escapes++;

                // –ø–æ—Å–ª–µ 7 —É–±–µ–≥–∞–Ω–∏–π –∫–Ω–æ–ø–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏ –º–µ–Ω—è–µ—Ç—Å—è —Ç–µ–∫—Å—Ç
                if (escapes > 7) {
                    noBtn.style.display = "none";
                    document.getElementById("question").innerText = "–õ–∞–¥–Ω–æ –ª–∞–¥–Ω–æ üòÑ –≤—ã–±–æ—Ä–∞ –Ω–µ—Ç";
                }
            }
        }

        // –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –º—ã—à–∏
        document.addEventListener('mousemove', function(e) {
            gentlyMoveAway(e.clientX, e.clientY);
        });

        // –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–∞—Å–∞–Ω–∏–π (–º–µ–¥–ª–µ–Ω–Ω—ã–π –∏ –ø–ª–∞–≤–Ω—ã–π)
        document.addEventListener('touchmove', function(e) {
            e.preventDefault(); // –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª
            if (e.touches.length > 0) {
                gentlyMoveAway(e.touches[0].clientX, e.touches[0].clientY);
            }
        }, { passive: false });

        // —Ç–∞–∫–∂–µ –ø—Ä–∏ touchstart —Å—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ —É–±–µ–∂–∞–ª–∞, –µ—Å–ª–∏ –ø–∞–ª–µ—Ü —Ä—è–¥–æ–º
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 0) {
                gentlyMoveAway(e.touches[0].clientX, e.touches[0].clientY);
            }
        }, { passive: false });

        // –∫–ª–∏–∫ –Ω–∞ —Å–∞–º—É –∫–Ω–æ–ø–∫—É "–ù–µ—Ç" —Ç–æ–∂–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–∞–∫ –ø–æ–±–µ–≥
        noBtn.addEventListener('click', function(e) {
            e.preventDefault();
            // —Å—Ä–∞–∑—É —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –∏ –ø—Ä—è—á–µ–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
            escapes++;
            if (escapes > 7) {
                noBtn.style.display = "none";
                document.getElementById("question").innerText = "–õ–∞–¥–Ω–æ –ª–∞–¥–Ω–æ üòÑ –≤—ã–±–æ—Ä–∞ –Ω–µ—Ç";
                return;
            }

            // –ø–µ—Ä–µ–º–µ—â–∞–µ–º –≤ —Å–ª—É—á–∞–π–Ω–æ–µ –º–µ—Å—Ç–æ
            const btnRect = noBtn.getBoundingClientRect();
            const maxX = window.innerWidth - btnRect.width - 20;
            const maxY = window.innerHeight - btnRect.height - 20;
            const minX = 20, minY = 60;
            noBtn.style.left = Math.random() * (maxX - minX) + minX + 'px';
            noBtn.style.top = Math.random() * (maxY - minY) + minY + 'px';
            noBtn.style.transform = 'none';
        });

        // —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ –î–ê
        window.accept = function() {
            document.getElementById("main").innerHTML = `
            <div class="card">
                <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é!</h2>
                <p>
                –° –¥–Ω—ë–º —Å–º–µ—Ä—Ç–∏ –ß–∏–∫–∞—Ç–∏–ª–æ<br>
                –° –¥–Ω—ë–º —Å–ª—É—á–∞–π–Ω–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–µ–Ω–µ–≥<br>
                –° –¥–Ω—ë–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ—Ç–æ–≤<br>
                –° –¥–Ω—ë–º –∫–æ–≥–¥–∞ –≤—Å—ë –Ω–µ —Ç–∞–∫ –ø–ª–æ—Ö–æ
                </p>
                <button class="next" onclick="nextPage()">‚ûú</button>
            </div>`;
        };

        // –≤—Ç–æ—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        window.nextPage = function() {
            document.getElementById("main").innerHTML = `
            <div class="card">
                <h2>–° –î–Ω—ë–º —Å–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞ ü§ç</h2>
                <p>
                –ú—ã –∑–Ω–∞–∫–æ–º—ã –≤—Å–µ–≥–æ –º–µ—Å—è—Ü,<br>
                –Ω–æ —è –ø—Ä–∞–≤–¥–∞ —Ä–∞–¥, —á—Ç–æ –æ–Ω –ø—Ä–æ—à—ë–ª –∏–º–µ–Ω–Ω–æ —Ç–∞–∫.
                <br><br>
                –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ –∑–∞ –æ–±—â–µ–Ω–∏–µ, –ª—ë–≥–∫–æ—Å—Ç—å
                –∏ —Ç–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π.
                <br><br>
                –ü—É—Å—Ç—å –≤–ø–µ—Ä–µ–¥–∏ –±—É–¥–µ—Ç –µ—â—ë –º–Ω–æ–≥–æ —Ö–æ—Ä–æ—à–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤.
                </p>
            </div>`;
        };

        // –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—Å—Ç–∞–Ω–æ–≤–∏–º –∫–Ω–æ–ø–∫—É "–ù–µ—Ç" –≤ –±–æ–ª–µ–µ-–º–µ–Ω–µ–µ —É–¥–æ–±–Ω–æ–µ –º–µ—Å—Ç–æ (—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∞ "–î–∞")
        window.addEventListener('load', function() {
            if (noBtn) {
                // —Å—Ç–∞–≤–∏–º –µ—ë –ø—Ä–∞–≤–µ–µ –∏ –Ω–∏–∂–µ –∫–Ω–æ–ø–∫–∏ "–î–∞"
                noBtn.style.left = '220px';
                noBtn.style.top = '300px';
                noBtn.style.transform = 'none';
            }
        });

    })();
</script>
</body>
</html>